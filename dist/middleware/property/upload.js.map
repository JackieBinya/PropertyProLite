{"version":3,"sources":["../../../src/middleware/property/upload.js"],"names":["req","res","next","files","file","photo","cloudinary","v2","uploader","upload","tempFilePath","err","result","status","send","ERROR","body","image_url","secure_url"],"mappings":";;;;;;;;;AAAA;;AACA;;eAEe,kBAACA,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/B,MAAGF,GAAG,CAACG,KAAP,EAAc;AACV,QAAMC,IAAI,GAAGJ,GAAG,CAACG,KAAJ,CAAUE,KAAvB;;AACAC,2BAAWC,EAAX,CAAcC,QAAd,CAAuBC,MAAvB,CAA8BL,IAAI,CAACM,YAAnC,EAAiD,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9D,UAAID,GAAJ,EAASV,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,qBAAQ,GAAR,EAAaC,aAAb,EAAoBJ,GAApB,CAArB;AAETX,MAAAA,GAAG,CAACgB,IAAJ,CAASC,SAAT,GAAqBL,MAAM,CAACM,UAA5B;AACAhB,MAAAA,IAAI;AACP,KALD;AAMH,GARD,MASK;AACDA,IAAAA,IAAI;AACP;AACJ,C","sourcesContent":["import { results, ERROR } from '../../helper/result';\r\nimport cloudinary from '../../startup/cloudinary';\r\n\r\nexport default (req, res, next) => {\r\n    if(req.files) {\r\n        const file = req.files.photo;\r\n        cloudinary.v2.uploader.upload(file.tempFilePath, (err, result) => {\r\n            if (err) res.status(500).send(results(500, ERROR, err));\r\n            \r\n            req.body.image_url = result.secure_url;\r\n            next();\r\n        });\r\n    }\r\n    else {\r\n        next();\r\n    }\r\n}"],"file":"upload.js"}